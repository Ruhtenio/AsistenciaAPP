{"version":3,"file":"src_app_pages_crear-usuario_crear-usuario_module_ts.js","mappings":";;;;;;;;;;;;;;;;;;AAAyC;AACc;AAEC;AAExD,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,iEAAgB;KAC5B;CACF,CAAC;IAMW,6BAA6B,SAA7B,6BAA6B;;AAA7B,6BAA6B;IAJzC,uDAAQ,CAAC;QACR,OAAO,EAAE,CAAC,kEAAqB,CAAC,MAAM,CAAC,CAAC;QACxC,OAAO,EAAE,CAAC,yDAAY,CAAC;KACxB,CAAC;GACW,6BAA6B;AAAA;;;;;;;;;;;;;;;;;;;;;;;AChBD;AACM;AACF;AAEA;AAEkC;AAEvB;IAW3C,sBAAsB,SAAtB,sBAAsB;;AAAtB,sBAAsB;IATlC,uDAAQ,CAAC;QACR,OAAO,EAAE;YACP,yDAAY;YACZ,uDAAW;YACX,uDAAW;YACX,wFAA6B;SAC9B;QACD,YAAY,EAAE,CAAC,iEAAgB,CAAC;KACjC,CAAC;GACW,sBAAsB;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnBnC;AACA;AAGA;AACA;AACA;IAOaM,gBAAgB,SAAhBA,gBAAgB;EAS3BC,YAAoBC,MAApB,EAA4CC,EAA5C,EAA+D;IAA3C;IAAwB;IAR5C,cAAS,EAAT;IACA,gBAAW,EAAX;IACA,qBAAgB,EAAhB;IACA,uBAAkB,EAAlB;IACA,iBAAY,EAAZ;IACA,oBAAe,EAAf;IACA,gBAAW,CAAX;EAEoE;;EAEpEC,gBAAgB;IACd,KAAKC,cAAL;EACD;;EAEDA,cAAc;IACZ,KAAKF,EAAL,CAAQG,SAAR,GAAoBC,IAApB,CAA0BC,IAAD,IAAyB;MAChD,KAAKC,QAAL,GAAgBD,IAAI,CAACE,MAAL,CAAYC,MAA5B;IACD,CAFD,EAEGC,KAFH,CAEUC,GAAD,IAAQ;MACfhB,qEAAc,CAAC,+BAAD,EAAkCgB,GAAlC,CAAd;IACD,CAJD;EAKD;;EAEKC,gBAAgB;IAAA;;IAAA;MACpB,MAAMC,GAAG,GAAY,IAAIjB,0DAAJ,EAArB;MACA,MAAMkB,GAAG,GAAGD,GAAG,CAACE,oBAAJ,CACV,KAAI,CAACC,MADK,EAEV,KAAI,CAACC,QAFK,EAGV,KAAI,CAACC,aAHK,EAIV,KAAI,CAACC,eAJK,EAKV,KAAI,CAACC,SALK,CAAZ;;MAOA,IAAIN,GAAG,KAAK,EAAZ,EAAgB;QACdpB,oEAAa,CAACoB,GAAD,CAAb;QACA;MACD;;MAED,MAAM,KAAI,CAACb,EAAL,CAAQoB,UAAR,CACJ,KAAI,CAACL,MADD,EAEJ,KAAI,CAACC,QAFD,EAGJ,KAAI,CAACC,aAHD,EAIJ,KAAI,CAACC,eAJD,EAKJ,KAAI,CAACC,SALD,EAMJ,GANI,EAOJf,IAPI,CAOEC,IAAD,IAA2B;QAChC,IAAIA,IAAI,CAACgB,OAAL,CAAaA,OAAb,KAAyB,CAA7B,EAAgC;UAC9B5B,oEAAa,CAAC,gCAAD,CAAb;;UACA,KAAI,CAACM,MAAL,CAAYuB,QAAZ,CAAqB,CAAC,OAAD,CAArB;QACD,CAHD,MAGO;UACL7B,oEAAa,CAAC,qHAAD,CAAb;QACD;MACF,CAdK,EAcHgB,KAdG,CAcIC,GAAD,IAAQ;QACfhB,qEAAc,CAAC,gCAAD,EAAmCgB,GAAnC,CAAd;MACD,CAhBK,CAAN;IAdoB;EA+BrB;;EACDa,WAAW;IACT,KAAKxB,MAAL,CAAYuB,QAAZ,CAAqB,CAAC,OAAD,CAArB;EACD;;AAzD0B;;;;;;;;AAAhBzB,gBAAgB,sDAL5BN,wDAAS,CAAC;EACTiC,QAAQ,EAAE,mBADD;EAETC,UAAAA,gEAFS;;AAAA,CAAD,CAKmB,GAAhB5B,gBAAgB,CAAhB","sources":["./src/app/pages/crear-usuario/crear-usuario-routing.module.ts","./src/app/pages/crear-usuario/crear-usuario.module.ts","./src/app/pages/crear-usuario/crear-usuario.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { CrearUsuarioPage } from './crear-usuario.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: CrearUsuarioPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class CrearUsuarioPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { CrearUsuarioPageRoutingModule } from './crear-usuario-routing.module';\n\nimport { CrearUsuarioPage } from './crear-usuario.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    CrearUsuarioPageRoutingModule\n  ],\n  declarations: [CrearUsuarioPage]\n})\nexport class CrearUsuarioPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { capSQLiteChanges, DBSQLiteValues } from '@capacitor-community/sqlite';\nimport { ViewWillEnter } from '@ionic/angular';\nimport { showAlertDUOC, showAlertError } from 'src/app/model/Message';\nimport { Usuario } from 'src/app/model/Usuario';\nimport { DatabaseService } from 'src/app/services/database.service';\n\n@Component({\n  selector: 'app-crear-usuario',\n  templateUrl: './crear-usuario.page.html',\n  styleUrls: ['./crear-usuario.page.scss'],\n})\nexport class CrearUsuarioPage implements ViewWillEnter {\n  correo = '';\n  password = '';\n  nombreUsuario = '';\n  preguntaSecreta = '';\n  respuesta = '';\n  sesionActiva = '';\n  cantidad = 0;\n\n  constructor(private router: Router, private db: DatabaseService) { }\n\n  ionViewWillEnter(): void {\n    this.setUsersLength();\n  }\n\n  setUsersLength() {\n    this.db.readUsers().then((resp: DBSQLiteValues) => {\n      this.cantidad = resp.values.length;\n    }).catch((err) => {\n      showAlertError('CreateUserPage.setUsersLenght', err);\n    });\n  }\n\n  async registrarUsuario() {\n    const usu: Usuario = new Usuario();\n    const msg = usu.validarCamposUsuario(\n      this.correo,\n      this.password,\n      this.nombreUsuario,\n      this.preguntaSecreta,\n      this.respuesta);\n\n    if (msg !== '') {\n      showAlertDUOC(msg);\n      return;\n    }\n\n    await this.db.createUser(\n      this.correo,\n      this.password,\n      this.nombreUsuario,\n      this.preguntaSecreta,\n      this.respuesta,\n      'N'\n    ).then((resp: capSQLiteChanges) => {\n      if (resp.changes.changes === 1) {\n        showAlertDUOC('Su cuenta fue creada con éxito');\n        this.router.navigate(['login']);\n      } else {\n        showAlertDUOC('Su cuenta no pudo ser creada con éxito. Comuníquese con el Administrador del Sistema o intente nuevamente más tarde');\n      }\n    }).catch((err) => {\n      showAlertError('CreateUserPage.registerNewUser', err);\n    });\n  }\n  volverAtras() {\n    this.router.navigate(['login']);\n  }\n\n}\n"],"names":["Component","Router","showAlertDUOC","showAlertError","Usuario","DatabaseService","CrearUsuarioPage","constructor","router","db","ionViewWillEnter","setUsersLength","readUsers","then","resp","cantidad","values","length","catch","err","registrarUsuario","usu","msg","validarCamposUsuario","correo","password","nombreUsuario","preguntaSecreta","respuesta","createUser","changes","navigate","volverAtras","selector","template"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}